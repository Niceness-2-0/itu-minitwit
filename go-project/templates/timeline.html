{{ define "timeline.html" }}
<!DOCTYPE html>
<html lang="en">

<head>
  <title>{{ .Title }}</title>
</head>

{{ block "body" . }}
<h2>{{ .Title }}</h2>

{{ if .User }}
{{ if .ProfileUser }}
<div class="followstatus">
  {{ if eq .User .ProfileUser.UserID }}
  This is you!
  {{ else if .Followed }}
  You are currently following this user.
  <a class="unfollow" href="/unfollow/{{ .ProfileUser.Username }}">Unfollow user</a>.
  {{ else }}
  You are not yet following this user.
  <a class="follow" href="/follow/{{ .ProfileUser.Username }}">Follow user</a>.
  {{ end }}
</div>
{{ else }}
<div class="twitbox">
  <h3>What's on your mind {{ .Username }}?</h3>
  <form action="/add_message" method="post">
    <p><input type="text" name="text" size="60">
      <input type="submit" value="Share">
    </p>
  </form>
</div>
{{ end }}
{{ end }}

<ul class="messages">
  {{ range .Messages }}
  <li>
    <img src="https://www.gravatar.com/avatar/{{ .Username }}?s=48">
    <p><strong><a href="/user/{{ .Username }}">{{ .Username }}</a></strong> {{ .Text }}</p>
    <small>&mdash; {{ .PubDate }}</small>
  </li>
  {{ else }}
  <li><em>There's no message so far.</em></li>
  {{ end }}
</ul>

{{ end }}

</html>
{{ end }}